@page
@using IsikUn.IncubationCentre.Localization
@using IsikUn.IncubationCentre.Permissions
@using IsikUn.IncubationCentre.Web.Pages.Projects
@using Microsoft.AspNetCore.Authorization
@using Microsoft.Extensions.Localization
@using Volo.Abp.AspNetCore.Mvc.UI.Bootstrap.TagHelpers.Modal
@model AssignMentorModalModel
@inject IStringLocalizer<IncubationCentreResource> L
@{
    Layout = null;
}


<form asp-page="/Projects/AssignMentorModal">
    <abp-modal>
       <abp-modal-header title="@L["AssignMentor"].Value"></abp-modal-header>
        <abp-modal-body>
            <div class="mb-3">
                <label class="form-label" for="Project_Name">@["ProjectName"].Value</label>
                <input type="text" id="Project_Name" disabled name="Project.Name" value="@(Model.Project.Name)" class="form-control valid" aria-invalid="false">
            </div>
            <div class="mb-3">
                <label class="form-label" for="Project_Name">@["Entreprenur"].Value</label>
                @try{
                    <input type="text" id="Project_Name" disabled name="Project.Name" value="@(Model.Project.Entreprenurs.FirstOrDefault().IdentityUser.Name) @(Model.Project.Entreprenurs.FirstOrDefault().IdentityUser.Surname)" class="form-control valid" aria-invalid="false">
                }
                @catch(Exception ex){
                    <input type="text" id="Project_Name" disabled name="Project.Name" value="- class="form-control valid" aria-invalid="false">
                }
            </div>
             <div class="mb-3">
                <label class="form-label" for="Project_Name">@["ProjectTags"].Value</label>
                <input type="text" id="Project_Name" disabled name="Project.Name" value="@Model.Project.Tags" class="form-control valid" aria-invalid="false">
            </div>
            <div class="mb-3">
                <label class="form-label" for="Project_Name">@["CreationTime"].Value</label>
                <input type="text" id="Project_Name" disabled name="Project.Name" value="@Model.Project.CreationTime.toString("dd/MM/yyyy")" class="form-control valid" aria-invalid="false">
            </div>

            <abp-input asp-for="Project.Name" />
            <abp-input asp-for="Project.Entrepreneurs.FirstOrDefault().IdentityUser.Name" />
            <abp-input asp-for="Project.Tags" />
            <abp-input asp-for="Project.CreationTime" />
        </abp-modal-body>
        <abp-modal-footer buttons="@(AbpModalButtons.Cancel|AbpModalButtons.Save)"></abp-modal-footer>
    </abp-modal>
</form>



<script>
    $(function(){
        var l = abp.localization.getResource('IncubationCentre');
        $("#Project_EntreprenurId").parent("div").hide();
        $("#Project_Status").parent("div").hide();
        $("#Project_Tags").attr("placeholder",`@L["YouCanAddNewTagWithEnterOrComma"]`);
        var inputTags = document.querySelector("#Project_Tags");
        var tagify = new Tagify(inputTags, {
          originalInputValueFormat: valuesArr => valuesArr.map(item => item.value).join(',')
        });
    })
</script>